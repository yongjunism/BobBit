{% extends 'base/base.html' %}
{% load static %}
{% block head %}
<link href="{% static 'css/pricePredict/price.css' %}" rel="stylesheet">
<link href="{% static 'css/pricePredict/bootstrap-datepicker.css' %}" rel="stylesheet">
<script src="https://cdn.amcharts.com/lib/5/index.js"></script>
<script src="https://cdn.amcharts.com/lib/5/xy.js"></script>
<script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>
{% endblock head %}

{% block contents %}
<br><br><br><br>
<!-- í—¤ë” ë¶€ë¶„ì— ê°€ë ¤ì„œ ì„ì‹œë¡œ ëŒì–´ë‚´ë ¤ë†¨ìŒ  -->
<div class ="p_Container">
  <div class = "catagori-Nav">
  {% for pd in pd_list %}
  <li class="page-item">
      {% if pd.pNo ==  product_info.pNo %}
      <a class="select" href='../{{ pd.pNo }}'>
          {{ pd.pName }}
      </a>
      {% else %}
      <a class="non-select" href='../{{ pd.pNo }}'>
          {{ pd.pName }}
      </a>
      {% endif %}
  </li>
  {% endfor %}
  </div>
  <section class = "title_section">
      <h1>{{product_info.pName}}</h1>
  </section>
  <div class = "datepicker">
      <input type="text" id="datePicker" value={{today.year}}-{{today.month}}-{{today.day}}>
  </div>
  <section class ="chartarea">
      <div id="chartdiv"></div>
  </section>
</div>


<div class="banner-inner" >
  <div class="predict" style="padding-left:800px; padding-top:150px">
    <h2><bold>{{product_info.pName}}</bold>ì˜ ë¬¼ê°€ëŠ” <strong>{{lastmonth}}ì›” ëŒ€ë¹„ XXXì›(XX%)</strong> ì˜ˆìƒë©ë‹ˆë‹¤.<br><br><br></h2>
  </div>
  
  <form name="form1" style="width:500px; height:100px; padding-left:800px; padding-top:0px">
    <fieldset>
      <legend>{{product_info.pName}}</legend>
      <ul id="info">
        <li>
          <div style="padding-bottom:10px">
            <label for="price"> í˜„ì¬ ê°€ê²©(1ê°œ)</label>
            <input type="text" name="price" value={{product_info.price}} style="width:100px; height:30px" readonly>ì›
          </div>
        </li>
        <li>
            <div style="padding-bottom:10px">
              
              <label for="quantity">ìˆ˜ëŸ‰</label>
              <input type="text" name="quantity" value="1" max="" style="width:100px; height:30px">ê°œ
              <input type="button" value=" + " name="add">
              <input type="button" value=" - " name="minus">
            </div>
        </li>
        <li>
          <div>
            <label for="total">ìµœì¢… ê°€ê²©</label>
            <input type="text" name="total" value={{product_info.price}}*{{quantity}} style="width:100px; height:30px" readonly>ì›
          </div>
        </li>
      </ul>
    </fieldset>

    <div>
      <input type="submit" value="êµ¬ë§¤" onclick="window.open('purchase.html')">
    </div>
  </form>
  
    <br>
    <div class="recommend" style="padding-top:100px; padding-left:50px; padding-bottom:20px">
      <h2> êµ¬ë§¤ì¶”ì²œ</h2>
      <h6> í•´ë‹¹ ê°€ê²©ì€ coupang ë­í‚¹ ê¸°ì¤€ìœ¼ë¡œ ë°˜ì˜ë©ë‹ˆë‹¤.</h6>
    </div>
    <div class="others" style="padding-left:50px">
      <p style="padding-bottom:10px">
        {% for pd in pd_list %}
        {{pd.pName}} &nbsp;&nbsp;&nbsp;&nbsp;<u>ë°°ì†¡ë¹„ í¬í•¨</u>
        <input type="button" value="êµ¬ë§¤í•˜ëŸ¬ ê°€ê¸°" style="width:200px; height:30px; margin-bottom:10px" onclick="window.open('../{{ pd.pNo }}')"><br>
        {% endfor %}
      </p>
    </div>

</div>
{% endblock contents %}

{% block contents %}
    <div class ="p_Container">
        <div class = "catagori-Nav">
        {% for pd in pd_list %}
        <li class="page-item">
            {% if pd.pNo ==  product_info.pNo %}
            <a class="select" href='../{{ pd.pNo }}'>
                {{ pd.pName }}
            </a>
            {% else %}
            <a class="non-select" href='../{{ pd.pNo }}'>
                {{ pd.pName }}
            </a>
            {% endif %}
        </li>
        {% endfor %}
        </div>
        <section class = "title_section">
            <h1>{{icon}} {{product_info.pName}}</h1>
            <li> ëŒ€í˜•ë§ˆíŠ¸ "ì›ê°€" ê¸°ì¤€</li>
        </section>
        <div class= "line"></div>
        <div id = "content-area">
            <div id = "content_1">
                <div class = "datearea">
                    <li>ë‚ ì§œë¥¼ ì„ íƒí•´ ì›í•˜ëŠ” ì°¨íŠ¸ë¥¼ ì´ë™í•´ë³´ì„¸ìš”ğŸ‘‰</li>
                    <div class = "datepicker">
                        <input type="text" id="datePicker" value={{today.year}}-{{today.month}}-{{today.day}}>
                    </div>
                </div>
                <section class ="chartarea">
                    <div id="chartdiv"></div>
                </section>
            </div>
            <div id = "content_2">

            </div>
        </div>
    </div>
{% endblock contents %}

{% block script_section %}
<script src="{% static 'js/pricePredict/amcharts.js'%}"></script>
<script src="{% static 'js/pricePredict/bootstrap-datepicker.js'%}"></script>
<script>
    const csrftoken = getCookie('csrftoken');
	$(function() {
		$('#datePicker').datepicker({
		    format: "yyyy-mm-dd",	//ë°ì´í„° í¬ë§· í˜•ì‹(yyyy : ë…„ mm : ì›” dd : ì¼ )
		    autoclose : true,	//ì‚¬ìš©ìê°€ ë‚ ì§œë¥¼ í´ë¦­í•˜ë©´ ìë™ ìº˜ë¦°ë”ê°€ ë‹«íˆëŠ” ì˜µì…˜
		    clearBtn : true, //ë‚ ì§œ ì„ íƒí•œ ê°’ ì´ˆê¸°í™” í•´ì£¼ëŠ” ë²„íŠ¼ ë³´ì—¬ì£¼ëŠ” ì˜µì…˜ ê¸°ë³¸ê°’ false ë³´ì—¬ì£¼ë ¤ë©´ true
		    showWeekDays : true ,// ìœ„ì— ìš”ì¼ ë³´ì—¬ì£¼ëŠ” ì˜µì…˜ ê¸°ë³¸ê°’ : true
		    title: "ë‚ ì§œ ì„ íƒ",	//ìº˜ë¦°ë” ìƒë‹¨ì— ë³´ì—¬ì£¼ëŠ” íƒ€ì´í‹€
		    todayHighlight : true ,	//ì˜¤ëŠ˜ ë‚ ì§œì— í•˜ì´ë¼ì´íŒ… ê¸°ëŠ¥ ê¸°ë³¸ê°’ :false 
		    language : "ko"	//ë‹¬ë ¥ì˜ ì–¸ì–´ ì„ íƒ, ê·¸ì— ë§ëŠ” jsë¡œ êµì²´í•´ì¤˜ì•¼í•œë‹¤.
		}).on("changeDate", function(e){

        })
	})
</script>
<script type="text/javascript">
  const formform = document.getElementsByName("form1"),
        price = document.form1.price,
        quantity = document.form1.quantity,
        add = document.form1.add,
        minus = document.form1.minus,
        total = document.form1.total;
    
  if (formform){
    total.value = price.value;

    let quantityVal = quantity.value,
        totalVal = total.value,
        priceVal = price.value;

    if(add){
      add.addEventListener('click', function(){
        quantityVal++;
        totalVal = quantityVal * priceVal;
        quantity.value = quantityVal;
        total.value = totalVal;
        console.log(quantityVal, totalVal, priceVal)
      })
    }
      
    if(minus){
      minus.addEventListener('click', function(){
        if (quantityVal > 1){
          quantityVal--;
          totalVal = quantityVal * priceVal;
          quantity.value = quantityVal;
          total.value = totalVal;
          console.log(quantityVal, totalVal, priceVal);
      }else{
        quantityVal = 1;
      }
    })
  }
  </script>
{% endblock script_section %}